---
title: "代码分析"
date: 2019-09-03T20:41:46+08:00
draft: true
toc: false
images:
tags: 
  - untagged
---
---- 

最近在和别的团队合作一个项目。看了别人的代码，感触特别多。代码写的特别优雅。

``` js
const Flex = class {
  constructor(){}

  getOSInfo(){
    let ua = navigator.userAgent
    let type = this.UNKNOWN

    if (/Android|Adr\s|Linux\sU|U\sLinux/i.test(ua))
      type = this.ANDROID
    else if (/iPh(one)?\sOS|iOS/i.test(ua))
      type = this.IOS

    let info = {
      type: type,
      version: "" //todo...
    }

    // 1. 返回立即执行函数
    // 2. 给getOSInfo方法重新赋值为 info
    // 3. 使用闭包 第二次调用就不用再次执行正则的判断了
    return (this.getOSInfo = () => info)()
  }
}
```
